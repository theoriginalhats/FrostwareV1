local notif = {}
local activeNotifications = {}

local Notification = Instance.new("ScreenGui")
local Holder = Instance.new("Frame")
local UIListLayout = Instance.new("UIListLayout")
local UIPadding = Instance.new("UIPadding")

Notification.Name = "Notification"
Notification.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
Notification.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
Notification.ResetOnSpawn = false

Holder.Name = "Holder"
Holder.Parent = Notification
Holder.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Holder.BackgroundTransparency = 0.2
Holder.BorderSizePixel = 0
Holder.Position = UDim2.new(0.615, 0, 0, 0)
Holder.Size = UDim2.new(0, 264, 0, 400)
Holder.ClipsDescendants = true

UIListLayout.Parent = Holder
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.VerticalAlignment = Enum.VerticalAlignment.Bottom
UIListLayout.Padding = UDim.new(0, 10)

UIPadding.Parent = Holder
UIPadding.PaddingBottom = UDim.new(0, 10)

function notif:CreateDismissal(title, description, duration)
    local Frame = Instance.new("Frame")
    local UICorner = Instance.new("UICorner")
    local UIStroke = Instance.new("UIStroke")
    local Title = Instance.new("TextLabel")
    local Description = Instance.new("TextLabel")
    local TextButton = Instance.new("TextButton")
    local Timer = Instance.new("Frame")

    -- Notification UI Setup
    Frame.Parent = Holder
    Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Frame.BackgroundTransparency = 0.2
    Frame.Size = UDim2.new(1, 0, 0, 100)

    UICorner.CornerRadius = UDim.new(0, 4)
    UICorner.Parent = Frame

    UIStroke.Parent = Frame
    UIStroke.Thickness = 2
    UIStroke.Color = Color3.fromRGB(255, 255, 255)

    Title.Parent = Frame
    Title.Text = title
    Title.Size = UDim2.new(1, -10, 0, 30)
    Title.Position = UDim2.new(0, 5, 0, 5)
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 16
    Title.BackgroundTransparency = 1

    Description.Parent = Frame
    Description.Text = description
    Description.Size = UDim2.new(1, -10, 0, 40)
    Description.Position = UDim2.new(0, 5, 0, 35)
    Description.TextColor3 = Color3.fromRGB(220, 220, 220)
    Description.Font = Enum.Font.Gotham
    Description.TextSize = 14
    Description.TextWrapped = true
    Description.BackgroundTransparency = 1

    TextButton.Parent = Frame
    TextButton.Text = "Dismiss"
    TextButton.Size = UDim2.new(1, -10, 0, 25)
    TextButton.Position = UDim2.new(0, 5, 1, -30)
    TextButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    TextButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    TextButton.Font = Enum.Font.GothamBold
    TextButton.TextSize = 16

    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 4)
    buttonCorner.Parent = TextButton

    Timer.Parent = Frame
    Timer.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
    Timer.Size = UDim2.new(1, 0, 0, 5)
    Timer.Position = UDim2.new(0, 0, 1, -5)
    Timer.ClipsDescendants = true

    TextButton.MouseButton1Click:Connect(function()
        Frame:TweenPosition(UDim2.new(1, 0, Frame.Position.Y.Scale, 0), "In", "Quad", 0.5, true, function()
            Frame:Destroy()
        end)
    end)

    table.insert(activeNotifications, Frame)
    self:UpdateNotificationPositions()

    local tween = game:GetService("TweenService"):Create(
        Timer,
        TweenInfo.new(duration),
        { Size = UDim2.new(0, 0, 0, 5) }
    )
    tween:Play()

    task.delay(duration, function()
        if Frame.Parent then
            local index = table.find(activeNotifications, Frame)
            if index then
                table.remove(activeNotifications, index)
                self:UpdateNotificationPositions()
            end
            Frame:TweenPosition(UDim2.new(1, 0, Frame.Position.Y.Scale, 0), "In", "Quad", 0.5, true, function()
                Frame:Destroy()
            end)
        end
    end)
end

function notif:UpdateNotificationPositions()
    for i, frame in ipairs(activeNotifications) do
        frame.Position = UDim2.new(0, 0, 1 - (i * 0.15), 0)
    end
end

return notif
